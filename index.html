<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø·Ù…Ø£Ù†ÙŠÙ†Ø©</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');
        
        :root {
            --bg-color: #fdfdfd;
            --text-color: #002b55;
            --gold-main: #d4af37;
            --navy-main: #003a70;
            --gold-grad: linear-gradient(135deg, #d4af37, #b8860b);
            --navy-grad: linear-gradient(135deg, #003a70, #002142);
            --font-size-val: 1.2rem;
        }

        [data-theme="dark"] {
            --bg-color: #0e1621; --text-color: #e0e0e0;
        }

        body { 
            font-family: 'Tajawal', sans-serif; margin: 0; background: var(--bg-color); 
            color: var(--text-color); transition: 0.3s; overflow-x: hidden; -webkit-tap-highlight-color: transparent;
        }

        @keyframes slideIn { 
            from { opacity: 0; transform: translateY(30px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .header { padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .icon-btn { background: rgba(0,0,0,0.05); border: none; width: 42px; height: 42px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--gold-main); }

        .home-screen { display: flex; flex-direction: column; align-items: center; padding: 0 20px 40px; text-align: center; animation: slideIn 0.6s ease-out; }
        .main-logo-text { font-size: 3.8rem; font-weight: 900; color: var(--gold-main); margin: 15px 0 5px; }
        
        .prayer-container {
            background: var(--navy-grad); color: white; width: 100%; max-width: 360px; 
            border-radius: 25px; padding: 15px 0; margin-bottom: 25px; border: 1px solid var(--gold-main);
        }
        .prayer-card { display: flex; justify-content: space-around; padding: 5px; }
        .prayer-item { padding: 8px 5px; border-radius: 12px; transition: 0.4s; flex: 1; font-size: 0.75rem; }
        .active-prayer { background: #3498db; box-shadow: 0 0 15px rgba(52, 152, 219, 0.6); transform: scale(1.05); }

        .buttons-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; max-width: 360px; }
        .grid-btn { 
            aspect-ratio: 1/1; border-radius: 28px; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; color: white; font-weight: bold; 
            cursor: pointer; background: var(--navy-grad); border: 1px solid rgba(212,175,55,0.3); transition: 0.3s;
        }
        .grid-btn i { font-size: 1.8rem; margin-bottom: 5px; background: var(--gold-grad); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }

        .page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; flex-direction: column; z-index: 1000; background: var(--bg-color); }
        .page.active { display: flex; animation: slideIn 0.4s forwards; }
        .page-top { background: var(--navy-main); padding: 18px; text-align: center; color: var(--gold-main); font-weight: bold; }

        .page-content { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; overflow-y: auto; }
        
        .dhikr-wrapper { position: relative; width: 100%; display: flex; justify-content: center; align-items: center; margin-bottom: 20px; }
        .white-card { 
            background: #fff; width: 75%; min-height: 200px; border-radius: 25px; 
            display: flex; align-items: center; justify-content: center; text-align: center; 
            padding: 25px; font-weight: bold; font-size: var(--font-size-val); line-height: 1.6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid rgba(212,175,55,0.1);
            color: #002b55;
        }
        .nav-arrow { position: absolute; background: var(--gold-grad); border: none; color: white; width: 45px; height: 45px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; z-index: 20; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .arrow-right { right: 0px; } 
        .arrow-left { left: 0px; }

        .counter-circle { 
            width: 110px; height: 110px; border-radius: 50%; border: 4px solid var(--gold-main); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            color: white; cursor: pointer; background: var(--navy-grad); transition: 0.1s;
        }
        .counter-circle:active { transform: scale(0.9); }

        .action-btn { background: var(--navy-main); color: var(--gold-main); border: 1px solid var(--gold-main); padding: 12px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; font-family: 'Tajawal'; }
        .danger-btn { background: #c0392b; color: white; border: none; padding: 10px 20px; border-radius: 10px; margin-top: 20px; cursor: pointer; font-family: 'Tajawal'; }
    </style>
</head>
<body>

    <div class="header">
        <button class="icon-btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ™</button>
        <button class="icon-btn" onclick="openPage('settingsPage')">âš™ï¸</button>
    </div>

    <div class="home-screen">
        <div class="main-logo-text">Ø·Ù…Ø£Ù†ÙŠÙ†Ø©</div>
        <p style="color: #888; font-size: 0.85rem; margin-bottom: 20px;">Ø£Ù„Ø§ Ø¨Ø°ÙƒØ± Ø§Ù„Ù„Ù‡ ØªØ·Ù…Ø¦Ù† Ø§Ù„Ù‚Ù„ÙˆØ¨</p>
        
        <div class="prayer-container">
            <div id="cityLabel" style="font-size:0.7rem; margin-bottom:8px; opacity: 0.8;">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...</div>
            <div class="prayer-card">
                <div class="prayer-item" id="p-Fajr">Ø§Ù„ÙØ¬Ø±<br><b id="fajr">--:--</b></div>
                <div class="prayer-item" id="p-Dhuhr">Ø§Ù„Ø¸Ù‡Ø±<br><b id="dhuhr">--:--</b></div>
                <div class="prayer-item" id="p-Asr">Ø§Ù„Ø¹ØµØ±<br><b id="asr">--:--</b></div>
                <div class="prayer-item" id="p-Maghrib">Ø§Ù„Ù…ØºØ±Ø¨<br><b id="maghrib">--:--</b></div>
                <div class="prayer-item" id="p-Isha">Ø§Ù„Ø¹Ø´Ø§Ø¡<br><b id="isha">--:--</b></div>
            </div>
            <div id="timeRemaining" style="font-size: 0.85rem; font-weight: bold; color: var(--gold-main); margin-top: 10px;">--:--:--</div>
        </div>

        <div class="buttons-grid">
            <div class="grid-btn" onclick="start('morning')"><i>â˜€ï¸</i> Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</div>
            <div class="grid-btn" onclick="start('evening')"><i>ğŸŒ‡</i> Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</div>
            <div class="grid-btn" onclick="start('counter')"><i>ğŸ“¿</i> Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø±</div>
            <div class="grid-btn" onclick="start('sleep')"><i>ğŸŒ™</i> Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…</div>
            <div class="grid-btn" style="grid-column: span 2; aspect-ratio: auto; padding: 15px; background: var(--gold-grad);" onclick="openPage('statsPage')"><i>ğŸ“Š</i> Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</div>
        </div>
    </div>

    <div id="dhikrPage" class="page">
        <div class="page-top"><span id="topTitle">Ø£Ø°ÙƒØ§Ø±</span></div>
        <div class="page-content" style="background: var(--navy-grad);">
            <div id="customArea" style="display:none; margin-bottom:20px; width:90%; gap:5px; justify-content:center;">
                <input type="text" id="customInput" style="width:65%; padding:12px; border-radius:12px; border:none;" placeholder="Ø§ÙƒØªØ¨ Ø°ÙƒØ±Ùƒ Ø§Ù„Ø®Ø§Øµ...">
                <button class="action-btn" onclick="saveCustomDhikr()">Ø­ÙØ¸</button>
            </div>
            <div class="dhikr-wrapper">
                <button class="nav-arrow arrow-right" onclick="navDhikr(1)">â†’</button>
                <div class="white-card" id="txt">...</div>
                <button class="nav-arrow arrow-left" onclick="navDhikr(-1)">â†</button>
            </div>
            <div class="counter-circle" onclick="handleTap()">
                <div style="font-size:2.5rem; font-weight:bold;" id="num">0</div>
                <div style="font-size:0.7rem;" id="tapLabel">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</div>
            </div>
            <div style="display:flex; gap:20px; margin-top:30px;">
                <button onclick="closePages()" style="background:none; border:1px solid rgba(255,255,255,0.4); color:white; padding:10px 20px; border-radius:12px;">Ø®Ø±ÙˆØ¬</button>
                <button onclick="resetCurrentSession()" style="background:none; border:none; color:var(--gold-main); text-decoration:underline;">Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
            </div>
        </div>
    </div>

    <div id="statsPage" class="page">
        <div class="page-top">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
        <div class="page-content">
            <h1 id="totalStatDisplay" style="font-size:6rem; color:var(--navy-main); margin:0;">0</h1>
            <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„ØªØ³Ø¨ÙŠØ­Ø§Øª</p>
            <button class="danger-btn" onclick="resetAllStats()">ØªØµÙÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ğŸ”„</button>
            <button onclick="closePages()" class="action-btn" style="margin-top:20px;">Ø±Ø¬ÙˆØ¹</button>
        </div>
    </div>

    <div id="settingsPage" class="page">
        <div class="page-top">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
        <div class="page-content" style="justify-content:flex-start; padding-top:50px;">
             <div style="width:90%; background:#fff; padding:20px; border-radius:20px; color:#333;">
                <p>Ø­Ø¬Ù… Ø§Ù„Ø®Ø·:</p>
                <button class="action-btn" onclick="setFont('1.1rem')">ØµØºÙŠØ±</button>
                <button class="action-btn" onclick="setFont('1.4rem')">ÙˆØ³Ø·</button>
                <button class="action-btn" onclick="setFont('1.8rem')">ÙƒØ¨ÙŠØ±</button>
             </div>
             <button onclick="closePages()" class="action-btn" style="margin-top:20px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        // Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡ ÙƒØ§Ù…Ù„Ø©
        const morningAzkar = [
            {t:"Ø£Ø¹ÙˆØ° Ø¨Ø§Ù„Ù„Ù‡ Ù…Ù† Ø§Ù„Ø´ÙŠØ·Ø§Ù† Ø§Ù„Ø±Ø¬ÙŠÙ…: ï´¿Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù...ï´¾ Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", c:1},
            {t:"ï´¿Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ...ï´¾", c:3},
            {t:"ï´¿Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù...ï´¾", c:3},
            {t:"ï´¿Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù...ï´¾", c:3},
            {t:"Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡ØŒ ÙˆØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ±ØŒ Ø±Ø¨ Ø£Ø³Ø£Ù„Ùƒ Ø®ÙŠØ± Ù…Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… ÙˆØ®ÙŠØ± Ù…Ø§ Ø¨Ø¹Ø¯Ù‡ØŒ ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù…Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… ÙˆØ´Ø± Ù…Ø§ Ø¨Ø¹Ø¯Ù‡ØŒ Ø±Ø¨ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„ÙƒØ³Ù„ ÙˆØ³ÙˆØ¡ Ø§Ù„ÙƒØ¨Ø±ØŒ Ø±Ø¨ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø¹Ø°Ø§Ø¨ ÙÙŠ Ø§Ù„Ù†Ø§Ø± ÙˆØ¹Ø°Ø§Ø¨ ÙÙŠ Ø§Ù„Ù‚Ø¨Ø±", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ØŒ ÙˆØ¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ØŒ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ØŒ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØªØŒ ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø´ÙˆØ±", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø±Ø¨ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ Ø®Ù„Ù‚ØªÙ†ÙŠ ÙˆØ£Ù†Ø§ Ø¹Ø¨Ø¯ÙƒØŒ ÙˆØ£Ù†Ø§ Ø¹Ù„Ù‰ Ø¹Ù‡Ø¯Ùƒ ÙˆÙˆØ¹Ø¯Ùƒ Ù…Ø§ Ø§Ø³ØªØ·Ø¹ØªØŒ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù…Ø§ ØµÙ†Ø¹ØªØŒ Ø£Ø¨ÙˆØ¡ Ù„Ùƒ Ø¨Ù†Ø¹Ù…ØªÙƒ Ø¹Ù„ÙŠØŒ ÙˆØ£Ø¨ÙˆØ¡ Ø¨Ø°Ù†Ø¨ÙŠ ÙØ§ØºÙØ± Ù„ÙŠ ÙØ¥Ù†Ù‡ Ù„Ø§ ÙŠØºÙØ± Ø§Ù„Ø°Ù†ÙˆØ¨ Ø¥Ù„Ø§ Ø£Ù†Øª", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£ØµØ¨Ø­Øª Ø£Ø´Ù‡Ø¯Ùƒ ÙˆØ£Ø´Ù‡Ø¯ Ø­Ù…Ù„Ø© Ø¹Ø±Ø´ÙƒØŒ ÙˆÙ…Ù„Ø§Ø¦ÙƒØªÙƒ ÙˆØ¬Ù…ÙŠØ¹ Ø®Ù„Ù‚ÙƒØŒ Ø£Ù†Ùƒ Ø£Ù†Øª Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª ÙˆØ­Ø¯Ùƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„ÙƒØŒ ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø¹Ø¨Ø¯Ùƒ ÙˆØ±Ø³ÙˆÙ„Ùƒ", c:4},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ù…Ø§ Ø£ØµØ¨Ø­ Ø¨ÙŠ Ù…Ù† Ù†Ø¹Ù…Ø© Ø£Ùˆ Ø¨Ø£Ø­Ø¯ Ù…Ù† Ø®Ù„Ù‚Ùƒ ÙÙ…Ù†Ùƒ ÙˆØ­Ø¯Ùƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„ÙƒØŒ ÙÙ„Ùƒ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ„Ùƒ Ø§Ù„Ø´ÙƒØ±", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨Ø¯Ù†ÙŠØŒ Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø³Ù…Ø¹ÙŠØŒ Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨ØµØ±ÙŠØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª. Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„ÙƒÙØ±ØŒ ÙˆØ§Ù„ÙÙ‚Ø±ØŒ ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±ØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª", c:3},
            {t:"Ø­Ø³Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ù‡Ùˆ Ø¹Ù„ÙŠÙ‡ ØªÙˆÙƒÙ„Øª ÙˆÙ‡Ùˆ Ø±Ø¨ Ø§Ù„Ø¹Ø±Ø´ Ø§Ù„Ø¹Ø¸ÙŠÙ…", c:7},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹ÙÙˆ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø©ØŒ Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹ÙÙˆ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ©: ÙÙŠ Ø¯ÙŠÙ†ÙŠ ÙˆØ¯Ù†ÙŠØ§ÙŠ ÙˆØ£Ù‡Ù„ÙŠØŒ ÙˆÙ…Ø§Ù„ÙŠØŒ Ø§Ù„Ù„Ù‡Ù… Ø§Ø³ØªØ± Ø¹ÙˆØ±Ø§ØªÙŠØŒ ÙˆØ¢Ù…Ù† Ø±ÙˆØ¹Ø§ØªÙŠØŒ Ø§Ù„Ù„Ù‡Ù… Ø§Ø­ÙØ¸Ù†ÙŠ Ù…Ù† Ø¨ÙŠÙ† ÙŠØ¯ÙŠØŒ ÙˆÙ…Ù† Ø®Ù„ÙÙŠØŒ ÙˆØ¹Ù† ÙŠÙ…ÙŠÙ†ÙŠØŒ ÙˆØ¹Ù† Ø´Ù…Ø§Ù„ÙŠØŒ ÙˆÙ…Ù† ÙÙˆÙ‚ÙŠØŒ ÙˆØ£Ø¹ÙˆØ° Ø¨Ø¹Ø¸Ù…ØªÙƒ Ø£Ù† Ø£ØºØªØ§Ù„ Ù…Ù† ØªØ­ØªÙŠ", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§Ù„Ù… Ø§Ù„ØºÙŠØ¨ ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø© ÙØ§Ø·Ø± Ø§Ù„Ø³Ù…ÙˆØ§Øª ÙˆØ§Ù„Ø£Ø±Ø¶ØŒ Ø±Ø¨ ÙƒÙ„ Ø´ÙŠØ¡ ÙˆÙ…Ù„ÙŠÙƒÙ‡ØŒ Ø£Ø´Ù‡Ø¯ Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù†ÙØ³ÙŠØŒ ÙˆÙ…Ù† Ø´Ø± Ø§Ù„Ø´ÙŠØ·Ø§Ù† ÙˆØ´Ø±ÙƒÙ‡ØŒ ÙˆØ£Ù† Ø£Ù‚ØªØ±Ù Ø¹Ù„Ù‰ Ù†ÙØ³ÙŠ Ø³ÙˆØ¡Ø§Ù‹ØŒ Ø£Ùˆ Ø£Ø¬Ø±Ù‡ Ø¥Ù„Ù‰ Ù…Ø³Ù„Ù…", c:1},
            {t:"Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ¶Ø± Ù…Ø¹ Ø§Ø³Ù…Ù‡ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ø£Ø±Ø¶ ÙˆÙ„Ø§ ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ ÙˆÙ‡Ùˆ Ø§Ù„Ø³Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù„ÙŠÙ…", c:3},
            {t:"Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§Ù‹ØŒ ÙˆØ¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§Ù‹ØŒ ÙˆØ¨Ù…Ø­Ù…Ø¯ ï·º Ù†Ø¨ÙŠØ§Ù‹", c:3},
            {t:"ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ« Ø£ØµÙ„Ø­ Ù„ÙŠ Ø´Ø£Ù†ÙŠ ÙƒÙ„Ù‡ ÙˆÙ„Ø§ ØªÙƒÙ„Ù†ÙŠ Ø¥Ù„Ù‰ Ù†ÙØ³ÙŠ Ø·Ø±ÙØ© Ø¹ÙŠÙ†", c:1},
            {t:"Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡ Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†ØŒ Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø®ÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…: ÙØªØ­Ù‡ØŒ ÙˆÙ†ØµØ±Ù‡ØŒ ÙˆÙ†ÙˆØ±Ù‡ØŒ ÙˆØ¨Ø±ÙƒØªÙ‡ØŒ ÙˆÙ‡Ø¯Ø§Ù‡ØŒ ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù…Ø§ ÙÙŠÙ‡ ÙˆØ´Ø± Ù…Ø§ Ø¨Ø¹Ø¯Ù‡", c:1},
            {t:"Ø£ØµØ¨Ø­Ù†Ø§ Ø¹Ù„Ù‰ ÙØ·Ø±Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù… ÙˆØ¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¥Ø®Ù„Ø§ØµØŒ ÙˆØ¹Ù„Ù‰ Ø¯ÙŠÙ† Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯ ï·ºØŒ ÙˆØ¹Ù„Ù‰ Ù…Ù„Ø© Ø£Ø¨ÙŠÙ†Ø§ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…ØŒ Ø­Ù†ÙŠÙØ§Ù‹ Ù…Ø³Ù„Ù…Ø§Ù‹ ÙˆÙ…Ø§ ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ†", c:1},
            {t:"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", c:100},
            {t:"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ØŒ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ±", c:10},
            {t:"Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡", c:100}
        ];

        const eveningAzkar = morningAzkar.map(item => ({
            ...item,
            t: item.t.replace(/Ø£ØµØ¨Ø­Ù†Ø§/g, "Ø£Ù…Ø³ÙŠÙ†Ø§").replace(/Ø£ØµØ¨Ø­/g, "Ø£Ù…Ø³Ù‰").replace(/Ø§Ù„Ù†Ø´ÙˆØ±/g, "Ø§Ù„Ù…ØµÙŠØ±").replace(/Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…/g, "Ù‡Ø°Ù‡ Ø§Ù„Ù„ÙŠÙ„Ø©")
        }));

        const sleepAzkar = [
            {t:"ï´¿Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù...ï´¾ Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", c:1},
            {t:"Ø¨Ø§Ø³Ù…Ùƒ Ø±Ø¨ÙŠ ÙˆØ¶Ø¹Øª Ø¬Ù†Ø¨ÙŠ ÙˆØ¨Ùƒ Ø£Ø±ÙØ¹Ù‡ØŒ Ø¥Ù† Ø£Ù…Ø³ÙƒØª Ù†ÙØ³ÙŠ ÙØ§Ø±Ø­Ù…Ù‡Ø§ØŒ ÙˆØ¥Ù† Ø£Ø±Ø³Ù„ØªÙ‡Ø§ ÙØ§Ø­ÙØ¸Ù‡Ø§ Ø¨Ù…Ø§ ØªØ­ÙØ¸ Ø¨Ù‡ Ø¹Ø¨Ø§Ø¯Ùƒ Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ†", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ù‚Ù†ÙŠ Ø¹Ø°Ø§Ø¨Ùƒ ÙŠÙˆÙ… ØªØ¨Ø¹Ø« Ø¹Ø¨Ø§Ø¯Ùƒ", c:3},
            {t:"Ø¨Ø§Ø³Ù…Ùƒ Ø§Ù„Ù„Ù‡Ù… Ø£Ù…ÙˆØª ÙˆØ£Ø­ÙŠØ§", c:1},
            {t:"Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", c:33},
            {t:"Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù", c:33},
            {t:"Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù", c:34},
            {t:"Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ: ï´¿Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ...ï´¾", c:3},
            {t:"Ø³ÙˆØ±Ø© Ø§Ù„ÙÙ„Ù‚: ï´¿Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù...ï´¾", c:3},
            {t:"Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³: ï´¿Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù...ï´¾", c:3},
            {t:"Ø¢Ù…Ù† Ø§Ù„Ø±Ø³ÙˆÙ„ Ø¨Ù…Ø§ Ø£Ù†Ø²Ù„ Ø¥Ù„ÙŠÙ‡ Ù…Ù† Ø±Ø¨Ù‡ ÙˆØ§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†...", c:1},
            {t:"Ø§Ù„Ù„Ù‡Ù… Ø£Ø³Ù„Ù…Øª Ù†ÙØ³ÙŠ Ø¥Ù„ÙŠÙƒØŒ ÙˆÙÙˆØ¶Øª Ø£Ù…Ø±ÙŠ Ø¥Ù„ÙŠÙƒØŒ ÙˆÙˆØ¬Ù‡Øª ÙˆØ¬Ù‡ÙŠ Ø¥Ù„ÙŠÙƒØŒ ÙˆØ£Ù„Ø¬Ø£Øª Ø¸Ù‡Ø±ÙŠ Ø¥Ù„ÙŠÙƒØŒ Ø±ØºØ¨Ø© ÙˆØ±Ù‡Ø¨Ø© Ø¥Ù„ÙŠÙƒØŒ Ù„Ø§ Ù…Ù„Ø¬Ø£ ÙˆÙ„Ø§ Ù…Ù†Ø¬Ø§ Ù…Ù†Ùƒ Ø¥Ù„Ø§ Ø¥Ù„ÙŠÙƒØŒ Ø¢Ù…Ù†Øª Ø¨ÙƒØªØ§Ø¨Ùƒ Ø§Ù„Ø°ÙŠ Ø£Ù†Ø²Ù„Øª ÙˆØ¨Ù†Ø¨ÙŠÙƒ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„Øª", c:1}
        ];

        let data = {
            morning: { title:"Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­", list: morningAzkar },
            evening: { title:"Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡", list: eveningAzkar },
            sleep: { title:"Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…", list: sleepAzkar },
            counter: { title:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø±", list: [{t:"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", c:0}], inf:true }
        };

        let active = '', idx = 0, currentCount = 0, prayerTimings = {};

        window.onload = () => {
            updateStatsUI();
            const savedDhikr = localStorage.getItem('customDhikr');
            if(savedDhikr) data.counter.list[0].t = savedDhikr;
            initLocation(); 
            setInterval(updateCountdown, 1000);
        };

        function start(type) {
            active = type; idx = 0; currentCount = data[active].list[idx].c;
            document.getElementById('topTitle').innerText = data[active].title;
            document.getElementById('customArea').style.display = data[active].inf ? 'flex' : 'none';
            document.querySelectorAll('.nav-arrow').forEach(a => a.style.display = data[active].inf ? 'none' : 'block');
            openPage('dhikrPage'); updateUI();
        }

        function handleTap() {
            if (data[active].inf) {
                currentCount++;
            } else {
                if (currentCount > 0) currentCount--;
                if (currentCount === 0) {
                    if (idx < data[active].list.length - 1) { 
                        idx++; 
                        currentCount = data[active].list[idx].c; 
                    } else { 
                        alert("ØªÙ… Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø¨Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡"); 
                        closePages(); 
                        return; 
                    }
                }
            }
            let total = (parseInt(localStorage.getItem('totalDhikr')) || 0) + 1;
            localStorage.setItem('totalDhikr', total);
            updateStatsUI(); updateUI();
        }

        function saveCustomDhikr() {
            const val = document.getElementById('customInput').value;
            if(val) { 
                data.counter.list[0].t = val; 
                localStorage.setItem('customDhikr', val); 
                updateUI(); 
            }
        }

        function resetAllStats() {
            if(confirm("Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŒ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
                localStorage.setItem('totalDhikr', 0);
                updateStatsUI();
            }
        }

        function updateUI() {
            document.getElementById('txt').innerText = data[active].list[idx].t;
            document.getElementById('num').innerText = currentCount;
            document.getElementById('tapLabel').innerText = data[active].inf ? "Ø¹Ø¯Ø§Ø¯" : "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ";
        }

        function navDhikr(dir) {
            let next = idx + dir;
            if (next >= 0 && next < data[active].list.length) { 
                idx = next; 
                currentCount = data[active].list[idx].c; 
                updateUI(); 
            }
        }

        function updateStatsUI() { document.getElementById('totalStatDisplay').innerText = localStorage.getItem('totalDhikr') || 0; }
        function openPage(id) { document.getElementById(id).classList.add('active'); }
        function closePages() { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); }
        function setFont(s) { document.documentElement.style.setProperty('--font-size-val', s); }
        function toggleTheme() { 
            document.body.dataset.theme = document.body.dataset.theme === 'dark' ? 'light' : 'dark'; 
            document.getElementById('themeBtn').innerText = document.body.dataset.theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        }
        function resetCurrentSession() { idx = 0; currentCount = data[active].list[0].c; updateUI(); }

        function initLocation() {
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    fetch(`https://api.aladhan.com/v1/timings?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=4`)
                    .then(r => r.json()).then(res => { prayerTimings = res.data.timings; displayTimings(); });
                }, () => {
                    document.getElementById('cityLabel').innerText = "ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ù…ÙˆØ§Ù‚ÙŠØª";
                });
            }
        }

        function displayTimings() {
            const f = (v) => { let [h, m] = v.split(':'); h = parseInt(h); return (h % 12 || 12) + ':' + m + (h >= 12 ? ' Ù…' : ' Øµ'); };
            document.getElementById('fajr').innerText = f(prayerTimings.Fajr);
            document.getElementById('dhuhr').innerText = f(prayerTimings.Dhuhr);
            document.getElementById('asr').innerText = f(prayerTimings.Asr);
            document.getElementById('maghrib').innerText = f(prayerTimings.Maghrib);
            document.getElementById('isha').innerText = f(prayerTimings.Isha);
            document.getElementById('cityLabel').innerText = "Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ";
        }

        function updateCountdown() {
            if (!prayerTimings.Fajr) return;
            const now = new Date();
            const prayers = [
                {id:'p-Fajr',t:prayerTimings.Fajr, n:'Ø§Ù„ÙØ¬Ø±'},
                {id:'p-Dhuhr',t:prayerTimings.Dhuhr, n:'Ø§Ù„Ø¸Ù‡Ø±'},
                {id:'p-Asr',t:prayerTimings.Asr, n:'Ø§Ù„Ø¹ØµØ±'},
                {id:'p-Maghrib',t:prayerTimings.Maghrib, n:'Ø§Ù„Ù…ØºØ±Ø¨'},
                {id:'p-Isha',t:prayerTimings.Isha, n:'Ø§Ù„Ø¹Ø´Ø§Ø¡'}
            ];
            let nextP = null;
            document.querySelectorAll('.prayer-item').forEach(el => el.classList.remove('active-prayer'));
            for (let p of prayers) {
                let [h, m] = p.t.split(':'); let d = new Date(); d.setHours(h, m, 0);
                if (d > now) { nextP = { n: p.n, d: d, id: p.id }; break; }
            }
            if (!nextP) { 
                let [h, m] = prayers[0].t.split(':'); 
                let d = new Date(); d.setDate(d.getDate() + 1); d.setHours(h, m, 0); 
                nextP = { n: 'Ø§Ù„ÙØ¬Ø±', d: d, id: 'p-Fajr' }; 
            }
            document.getElementById(nextP.id).classList.add('active-prayer');
            const diff = nextP.d - now;
            const hrs = Math.floor(diff / 3600000); 
            const mins = Math.floor((diff % 3600000) / 60000); 
            const secs = Math.floor((diff % 60000) / 1000);
            document.getElementById('timeRemaining').innerText = `Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ ${nextP.n} ${hrs}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
        }
    </script>
</body>
</html>
